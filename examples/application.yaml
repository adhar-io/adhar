apiVersion: platform.adhar.io/v1alpha1
kind: Application
metadata:
  name: sample-app
  namespace: acme-corp
  labels:
    platform.adhar.io/organization: acme-corp
    platform.adhar.io/team: platform-team
spec:
  displayName: "Sample Application"
  description: "A simple web application example"
  organizationRef:
    name: acme-corp
  teamRef:
    name: platform-team
    namespace: acme-corp
  sourceCode:
    repositoryRef:
      name: sample-app-repo
      namespace: acme-corp
    defaultBranch: "main"
  build:
    registryOutput:
      registryRef:
        name: harbor-registry
      imageRepositoryName: "acme-corp/sample-app"
  deployments:
    - environmentRef:
        name: development
      version: "latest"
      replicas: 1
      rolloutStrategy: "RollingUpdate"
      env:
        - name: "LOG_LEVEL"
          value: "DEBUG"
        - name: "DATABASE_URL"
          valueFrom:
            secretKeyRef:
              name: "app-database-conn"
              key: "url"

